---
title: "Controllo Remoto Sicuro della Robotica: Soluzione Robonomics"
date: 2024-04-19
published: true
locale: 'it'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "La connessione e il controllo remoto del proprio dispositivo intelligente è una funzionalità molto popolare tra gli utenti. Tuttavia, un compito così banale causa ancora molte difficoltà agli utenti inesperti - dal superamento del NAT a problemi di sicurezza. In un nuovo articolo, mostreremo come queste difficoltà possano essere superate con l'aiuto di Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "La connessione e il controllo remoto del proprio dispositivo intelligente è una funzionalità molto popolare tra gli utenti. Tuttavia, un compito così banale causa ancora molte difficoltà agli utenti inesperti - dal superamento del NAT a problemi di sicurezza. In un nuovo articolo, mostreremo come queste difficoltà possano essere superate con l'aiuto di Robonomics."
tags: ['ROS 2', 'Smart Home']
---

Nell'articolo precedente, abbiamo parlato di come utilizziamo i vantaggi delle soluzioni industriali nell'infrastruttura di una casa intelligente robotizzata. Abbiamo mostrato come il framework ROS 2 e il suo protocollo middleware forniscano la scoperta automatica dei dispositivi e un'interazione intensiva (anche in tempo reale) tra di essi all'interno di una rete locale, il che è molto conveniente. Tuttavia, questo approccio è adatto principalmente per la cosiddetta Zona Fiduciaria - quella parte della rete informatica in cui la comparsa di attori terzi è improbabile. In questo caso, ci fidiamo di tutti i programmi in esecuzione e non abbiamo bisogno di utilizzare la crittografia, così come non viene utilizzata all'interno di un singolo computer quando i programmi si scambiano dati tra loro.

Ma cosa succede se è necessario garantire il funzionamento dei dispositivi ROS 2 con qualche servizio esterno o fornire accesso remoto dall'esterno? In questi momenti, sorge un problema di sicurezza: ottenendo l'accesso a un nodo ROS 2, un servizio esterno (e potenzialmente una persona malintenzionata) ottiene essenzialmente l'accesso a tutti gli altri nodi - può ascoltare completamente tutto il traffico DDS interno e accedere a tutti i servizi di sistema disponibili.

Il classico compromesso tra sicurezza e velocità/convenienza viene risolto dividendo il sistema sovrano della casa intelligente in due parti - sicura e insicura.

## Sicurezza in ROS 2

Designare una zona con requisiti di sicurezza speciali nello spazio di lavoro dei nodi ROS 2 è un compito tutt'altro che banale. Il pacchetto standard di sicurezza ROS 2 ([sros2](https://docs.ros.org/it/rolling/Concepts/Intermediate/About-Security.html)) fa parte di [ros-core](https://ros.org/reps/rep-2001.html#id32), su cui sono basate tutte le distribuzioni ROS 2, e secondo gli sviluppatori principali, è pensato per risolvere questo problema. Fornisce la possibilità di configurare un'infrastruttura a chiave pubblica (PKI) relativamente semplice all'interno di una singola rete locale. Per ogni nodo ROS 2 vengono impostate le politiche di accesso ai dati degli altri nodi, oltre a un insieme di file standard per tali scenari - chiavi crittografiche e certificati. Durante l'esecuzione del programma, i nodi "vedono" solo quelle fonti di dati a cui l'accesso è esplicitamente scritto nella configurazione nella fase di avvio del progetto. Tuttavia, questo approccio presenta un grande svantaggio: tutto il traffico nel sistema è crittografato, il che può influire sulle prestazioni sotto il carico di rete creato da DDS. Sarà necessario scrivere tutte le politiche di accesso e generare le chiavi per tutti i nodi. Questo è molto difficile da configurare e mantenere. E, cosa più importante, si perde il principale vantaggio del Middleware ROS 2: le prestazioni.

## Bridge

Un'altra soluzione è creare i cosiddetti gateway, che trasmettono i dati necessari mantenendo tutto il resto privato. Tipicamente, questo viene ottenuto utilizzando tunnel VPN o SSH. Viene creato un nodo separato nello spazio di scambio dati sicuro, che ha un indirizzo pubblico per le connessioni esterne. In questo caso, la gestione della sicurezza viene effettuata solo a livello di questo nodo (essenzialmente una finestra verso l'esterno), senza influire su tutti gli altri. Questo approccio è utilizzato nei progetti [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) e [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds), ma presenta anch'esso degli svantaggi. In questo scenario, è necessario stabilire un canale di comunicazione sicuro strettamente collegato all'indirizzo IP o al nome di dominio della controparte. Questi possono cambiare, essere bloccati o vulnerabili ad attacchi. All'epoca in cui è stato creato SSH, questo non era stato considerato. Inoltre, SSH si basa principalmente sul sistema di controllo degli accessi del sistema operativo, con tutti i suoi svantaggi intrinseci.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Classic Remote Control via public IP and SSH/VPN" />

*Ecco come gli utenti di solito si connettono ai loro robot da remoto al giorno d'oggi. Tuttavia, questo approccio presenta alcuni svantaggi. Richiede un IP pubblico e/o un nome DNS, che possono essere bloccati in alcuni paesi. Inoltre, necessita della memorizzazione di chiavi private aggiuntive in posizioni potenzialmente non sicure (ad esempio, ~/.ssh).*

SSH, utilizzato principalmente da amministratori di sistema e specialisti IT, richiede una conoscenza di base della riga di comando Bash e fiducia nel sistema operativo, poiché le chiavi di crittografia sono memorizzate direttamente nel file system o nell'agente SSH. La gestione delle chiavi di accesso rimane un compito piuttosto complesso per l'utente medio per mantenere un modo sicuro di proteggere i propri dati.

## Soluzione Web3

Come possiamo vedere, i metodi sopra descritti non sono privi di svantaggi, quindi considereremo una possibile soluzione al problema utilizzando tecnologie di rete peer-to-peer, su cui si basa Robonomics. In questo caso, il cloud decentralizzato di Robonomics può essere visto come una tabella di routing sicura, i cui indirizzi delle controparti sono le chiavi pubbliche dei nodi. È necessario un nodo Robonomics locale e la conoscenza di quale chiave pubblica possieda la controparte, così da non dipendere dal sistema DNS (inclusi registrar e server di nomi di dominio) e dal blocco degli indirizzi IP. La libreria [libP2P](https://libp2p.io/), che Robonomics utilizza, può impiegare diversi protocolli di trasporto per la consegna dei messaggi.

Inoltre, con l'avanzamento delle tecnologie Web3, sono emersi metodi più efficienti per la gestione delle informazioni critiche, incluse le chiavi private. Uno di questi è una frase mnemonica o seed - un insieme di 12 o 24 parole, utilizzato per creare account nelle reti decentralizzate. Questo metodo è comodo e sicuro, poiché il seed viene scritto su un supporto esterno (ad esempio, su carta) una sola volta durante l'inizializzazione e viene utilizzato solo per recuperare l'account. Da una frase mnemonica viene creata una chiave master, dalla quale può essere generata qualsiasi gerarchia di chiavi per diversi compiti (vedi **[Chiavi gerarchiche deterministiche](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Questo semplifica la gestione delle chiavi e il loro recupero in caso di smarrimento. Se una persona malintenzionata ottiene l'accesso a una delle tue coppie di chiavi, non potrà ottenere informazioni sulle altre chiavi create dalla frase mnemonica. La funzione di chiave derivata soft consente di confermare la proprietà dell'account root senza rivelarlo. Poiché le chiavi soft possono essere derivate utilizzando la chiave pubblica del genitore, possono essere utilizzate per identificare il genitorechiave senza esporre la seed principale.

## Controllo remoto in Home Assistant

Esaminiamo il processo di connessione in modo più dettagliato. L'[applicazione decentralizzata Robonomics](https://robonomics.app/) (o semplicemente DApp) funziona direttamente nel tuo browser, non richiede l'installazione di alcun software aggiuntivo né la necessità di memorizzare chiavi nel file system in un ambiente con un gran numero di programmi, la cui sicurezza non può essere garantita. La gestione delle chiavi di accesso viene eseguita tramite l'estensione Polkadot JS, così come con l'aiuto di un archivio hardware esterno per le chiavi (ad esempio, [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) per una maggiore affidabilità. Oltre al software specializzato per l'interazione con Robonomics, la DApp include anche un nodo libP2P leggero, con il quale avviene la connessione a Home Assistant.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Home Assistant Remote Control" />

Il proprietario di un abbonamento Robonomics Web Service gestisce i diritti di accesso all'infrastruttura della smart home tramite quello che viene chiamato controller - un account che gestisce tutte le informazioni sensibili in forma criptata in un gemello digitale. Solo gli utenti aggiunti all'abbonamento possono decriptare questi dati. Oltre alle chiavi di accesso, il Gemello Digitale memorizza anche la configurazione della DApp e, la cosiddetta, multi-address libP2P a cui la DApp si connette per una connessione sicura. La multi-address è una di quelle innovazioni che rende l'approccio libP2P così unico e flessibile. Si tratta di un formato speciale di indirizzo per i nodi, che implica la presenza di molti indirizzi IP, identificatori di trasporto e di rete, protocolli e porte, tramite i quali è possibile contattare un nodo specifico. L'elenco completo dei protocolli supportati è presentato nella [specifica](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Quindi, l'utente aggiunto all'abbonamento estrae una multi-address dal gemello digitale Robonomics e stabilisce una connessione sicura con un Peer ID noto solo a lui. Successo!

## Controllo remoto in ROS 2

Allo stesso modo, puoi utilizzare le funzionalità esistenti di Robonomics per interagire con i robot. Il team Robossembler, nell'ambito del Robonomics Grant Program, ha sviluppato un progetto Proof of Concept noto come [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge). Questo bridge consente dii tuoi nodi ROS 2 per connettersi con qualsiasi servizio esterno, workstation remota o un altro sistema ROS 2.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="Controllo remoto ROS 2 con Robonomics" />

*Un'illustrazione di come potrebbe apparire il controllo remoto di un robot domestico nel caso di ROS 2. Questo approccio offre numerosi vantaggi significativi: non è necessario un IP pubblico, l'accesso al robot è disponibile anche attraverso firewall di rete (NAT), le chiavi crittografiche private non sono memorizzate su disco e sono protette in modo affidabile.*

Il protocollo utilizzato in ROS 2, DDS, si combina naturalmente con libP2P grazie al suo simile modello publisher-subscriber per l'interazione tra nodi. Con l'aiuto del bridge Robonomics, i nodi ROS 2 e le loro interfacce - topic, servizi, tipi di messaggi (ad esempio, utilizzando l'eProsima Integration Service) possono essere configurati in modo dichiarativo, permettendo così l'interazione con il robot dall'esterno. Questo consente anche un ulteriore livello di sicurezza quando ci si connette a un computer remoto. Il meccanismo per ottenere il PeerID della controparte può essere lo stesso del caso con Home Assistant - tramite una richiesta Digital Twin dal nodo Robonomics, con l'unica differenza che invece del server Home Assistant ci sarà un robot ROS 2, e invece del libP2P-websocker-proxy ci sarà un Robonomics ROS 2 Wrapper collegato al robot.

## Opportunità potenziali in futuro

Tuttavia, queste non sono tutte le possibilità che un cloud decentralizzato su tecnologie Web3 può offrire. Nell'esempio descritto sopra, queste tecnologie vengono utilizzate per la trasmissione relativamente semplice di flussi di dati di messaggi tra computer remoti.

Questo può essere definito il livello di trasporto di base nello stack di rete Robonomics, che costituisce la base per l'implementazione di protocolli di livello superiore più complessi. Si parte da analoghi SSH, che implicano un'interazione più interattiva degli utenti con i loro sistemi ciber-fisici, fino ad arrivare a protocolli applicativi che prevedono l'interazione di un gran numero di utenti di infrastrutture robotiche autonome.

Ad esempio, la decisione di avviare la produzione di un determinato prodotto può essere collegata a una votazione all'interno di un'organizzazione di potenziali consumatori di tale prodotto, considerando la fattibilità economica. Attualmente, la decisione di avviare qualsiasi produzione viene presa tramite meccanismi di investimento, dove gli investitori, avendo ricevuto informazioni sulla domanda potenziale, possono acquisire quote di singole aziende che potranno soddisfare tale domanda in futuroSe i consumatori possono partecipare più attivamente allo sviluppo e alla determinazione dei prezzi dei nuovi prodotti, allora a lungo termine possiamo passare a una modalità di funzionamento in cui la produzione si ristrutturerà automaticamente per soddisfare la domanda in base ai dati forniti dai consumatori nella rete.