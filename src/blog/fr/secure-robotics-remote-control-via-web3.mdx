---
title: "Contrôle à distance sécurisé de la robotique : Solution Robonomics"
date: 2024-04-19
published: true
locale: 'fr'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "La connexion et le contrôle à distance de son propre appareil intelligent est une fonctionnalité très populaire auprès des utilisateurs. Cependant, une tâche aussi triviale pose encore de nombreuses difficultés aux utilisateurs inexpérimentés - de la gestion du NAT aux questions de sécurité. Dans un nouvel article, nous montrerons comment ces difficultés peuvent être surmontées grâce à Robonomics."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "La connexion et le contrôle à distance de son propre appareil intelligent est une fonctionnalité très populaire auprès des utilisateurs. Cependant, une tâche aussi triviale pose encore de nombreuses difficultés aux utilisateurs inexpérimentés - de la gestion du NAT aux questions de sécurité. Dans un nouvel article, nous montrerons comment ces difficultés peuvent être surmontées grâce à Robonomics."
tags: ['ROS 2', 'Smart Home']
---

Dans l'article précédent, nous avons expliqué comment nous utilisons les avantages des solutions industrielles dans l'infrastructure d'une maison intelligente robotisée. Nous avons montré comment le framework ROS 2 et son protocole middleware offrent une découverte automatique des appareils et une interaction intensive (y compris en temps réel) entre eux au sein d'un réseau local, ce qui est très pratique. Cependant, cette approche convient principalement à la soi-disant Zone de Confiance - cette partie du réseau informatique où l'apparition d'acteurs tiers est peu probable. Dans ce cas, nous faisons confiance à tous les programmes en cours d'exécution et il n'est pas nécessaire d'utiliser le chiffrement, tout comme il n'est pas utilisé à l'intérieur d'un même ordinateur lorsque les programmes échangent des données entre eux.

Mais que faire si vous devez assurer le fonctionnement des appareils ROS 2 avec un service externe ou leur fournir un accès à distance depuis l'extérieur ? À ce moment-là, un problème de sécurité se pose : après avoir obtenu l'accès à un nœud ROS 2, un service externe (et potentiellement une personne malveillante) obtient en fait l'accès à tous les autres nœuds - il peut écouter tout le trafic DDS interne et accéder à tous les services système disponibles.

Le compromis classique entre sécurité et rapidité/confort est résolu en divisant le système domotique souverain en deux parties - sécurisée et non sécurisée.

## Sécurité ROS 2

Désigner une zone avec des exigences de sécurité particulières dans l'espace de travail des nœuds ROS 2 est une tâche assez complexe. Le package standard de sécurité ROS 2 ([sros2](https://docs.ros.org/fr/rolling/Concepts/Intermediate/About-Security.html)) fait partie de [ros-core](https://ros.org/reps/rep-2001.html#id32), sur lequel toutes les distributions ROS 2 sont construites, et selon les développeurs principaux, il est destiné à résoudre ce problème. Il offre la possibilité de mettre en place une infrastructure à clé publique (PKI) relativement simple au sein d'un réseau local unique. Pour chaque nœud ROS 2, des politiques d'accès aux données des autres nœuds sont définies, ainsi qu'un ensemble de fichiers standards pour de tels scénarios - clés cryptographiques et certificats. Pendant l'exécution du programme, les nœuds "voient" uniquement les sources de données auxquelles l'accès est explicitement indiqué dans la configuration au moment du lancement du projet. Cependant, cette approche présente un inconvénient majeur : tout le trafic du système est chiffré, ce qui peut affecter les performances sous la charge réseau créée par DDS. Il sera nécessaire de rédiger toutes les politiques d'accès et de générer des clés pour tous les nœuds. Cela est très difficile à configurer et à maintenir. Et surtout, nous perdons le principal avantage du Middleware ROS 2 : la performance.

## Passerelles

Une autre solution consiste à créer ce que l'on appelle des passerelles, qui transmettent les données nécessaires tout en gardant tout le reste privé. En général, cela est réalisé à l'aide de VPN ou de tunnels SSH. Un nœud séparé est créé dans l'espace d'échange de données sécurisé, qui dispose d'une adresse publique pour les connexions externes. Dans ce cas, la gestion de la sécurité s'effectue uniquement au niveau de ce nœud (essentiellement une fenêtre vers l'extérieur), sans affecter tous les autres. Cette approche est utilisée dans les projets [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) et [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds), mais elle présente également des inconvénients. Dans ce scénario, il est nécessaire d'établir un canal de communication sécurisé strictement lié à l'adresse IP ou au nom de domaine du partenaire. Ceux-ci peuvent changer, être bloqués ou être vulnérables aux attaques. À l'époque où SSH a été créé, cela n'était pas pris en compte. De plus, SSH repose principalement sur le système de contrôle d'accès du système d'exploitation, avec tous ses inconvénients inhérents.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Classic Remote Control via public IP and SSH/VPN" />

*Voici comment les utilisateurs se connectent généralement à leurs robots à distance de nos jours. Cependant, cette approche présente certains inconvénients. Elle nécessite une adresse IP publique ou/et un nom DNS, qui peuvent être bloqués dans certains pays. Elle exige également le stockage de clés privées supplémentaires dans des emplacements potentiellement non sécurisés (par exemple, ~/.ssh).*

SSH, principalement utilisé par les administrateurs système et les spécialistes IT, requiert une connaissance de base de la ligne de commande Bash et une confiance dans le système d'exploitation, car les clés de chiffrement sont stockées directement dans le système de fichiers ou l'agent SSH. La gestion des clés d'accès reste une tâche assez complexe pour l'utilisateur moyen afin de garantir la sécurité de ses données.

## Solution Web3

Comme nous pouvons le constater, les méthodes ci-dessus ne sont pas sans inconvénients, nous allons donc envisager une solution possible au problème en utilisant les technologies de réseau pair-à-pair, sur lesquelles Robonomics est construit. Dans ce cas, le cloud décentralisé Robonomics peut être considéré comme une table de routage sécurisée, dont les adresses des contreparties sont les clés publiques des nœuds. Vous avez besoin d'un nœud Robonomics local et de connaître la clé publique de votre contrepartie, afin de ne pas dépendre du système DNS (y compris les registraires de noms de domaine et les serveurs) et du blocage des adresses IP. La bibliothèque [libP2P](https://libp2p.io/), utilisée par Robonomics, peut utiliser différents protocoles de transport pour la transmission des messages.

De plus, avec l'avancée des technologies Web3, des méthodes plus efficaces pour gérer les informations critiques, y compris les clés privées, ont émergé. L'une d'elles est la phrase mnémonique ou seed - un ensemble de 12 ou 24 mots, utilisé pour créer des comptes dans les réseaux décentralisés. Cette méthode est pratique et sûre, car la seed est écrite sur un support externe (par exemple, sur papier) une seule fois lors de l'initialisation et n'est utilisée que pour récupérer le compte. Une clé maîtresse est créée à partir de la phrase mnémonique, à partir de laquelle toute hiérarchie de clés pour différentes tâches peut être générée (voir **[Clés déterministes hiérarchiques](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Cela simplifie la gestion des clés et leur récupération en cas de perte. Si une personne malveillante accède à l'une de vos paires de clés, elle ne pourra pas obtenir d'informations sur les autres clés créées à partir de la phrase mnémonique. La fonctionnalité de clé dérivée souple permet de confirmer la propriété du compte racine sans le divulguer. Comme les clés souples peuvent être dérivées à l'aide de la clé publique parente, elles peuvent être utilisées pour identifier le parentclé sans exposer la graine parente.

## Contrôle à distance dans Home Assistant

Examinons de plus près le processus de connexion. L'[application décentralisée Robonomics](https://robonomics.app/) (ou simplement DApp) fonctionne directement dans votre navigateur, sans nécessiter l'installation de logiciels supplémentaires ni le besoin de stocker des clés dans le système de fichiers dans un environnement comportant de nombreux programmes dont la sécurité n'est pas garantie. La gestion des clés d'accès est assurée via l'extension Polkadot JS, ainsi qu'à l'aide d'un stockage matériel externe de clés (par exemple, [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) pour une fiabilité accrue. En plus des logiciels spécialisés pour l'interaction avec Robonomics, la DApp intègre également un nœud libP2P léger, qui permet la connexion à Home Assistant.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Contrôle à distance Home Assistant" />

Le propriétaire d'un abonnement Robonomics Web Service gère les droits d'accès à l'infrastructure de la maison intelligente via ce que l'on appelle un contrôleur – un compte qui gère toutes les informations sensibles sous forme chiffrée dans un jumeau numérique. Seuls les utilisateurs ajoutés à l'abonnement peuvent déchiffrer ces données. En plus des clés d'accès, le Jumeau Numérique stocke également la configuration de la DApp et, ce que l'on appelle, l'adresse multi libP2P à laquelle la DApp se connecte pour une connexion sécurisée. L'adresse multi est l'une des innovations qui rend l'approche libP2P si unique et flexible. Il s'agit d'un format d'adresse spécial pour les nœuds, qui implique la présence de nombreuses adresses IP, identifiants de transport et de réseau, protocoles et ports, par lesquels vous pouvez contacter un nœud spécifique. La liste complète des protocoles pris en charge est présentée dans la [spécification](https://github.com/multiformats/multiaddr/blob/master/protocols.csv).

Ainsi, l'utilisateur ajouté à l'abonnement extrait une adresse multi du jumeau numérique Robonomics et établit une connexion sécurisée avec un Peer ID connu de lui seul. Succès !

## Contrôle à distance dans ROS 2

De la même manière, vous pouvez utiliser les fonctionnalités existantes de Robonomics pour interagir avec des robots. L'équipe Robossembler, dans le cadre du Robonomics Grant Program, a développé un projet de preuve de concept appelé [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge). Ce pont permetvos nœuds ROS 2 pour se connecter à n'importe quel service externe, poste de travail distant ou autre système ROS 2.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="Contrôle à distance ROS 2 avec Robonomics" />

*Une illustration de ce à quoi pourrait ressembler le contrôle à distance d'un robot domestique dans le cas de ROS 2. Cette approche offre un certain nombre d'avantages significatifs : il n'est pas nécessaire d'avoir une IP publique, l'accès au robot est possible même à travers des pare-feux réseau (NAT), les clés cryptographiques privées ne sont pas stockées sur le disque et sont protégées de manière fiable.*

Le protocole utilisé dans ROS 2, DDS, se combine naturellement avec libP2P en raison de son modèle similaire de publication-abonnement pour l'interaction des nœuds. Avec l'aide du pont Robonomics, les nœuds ROS 2 et leurs interfaces - topics, services, types de messages (par exemple, en utilisant le eProsima Integration Service) peuvent être configurés de manière déclarative, permettant ainsi une interaction avec le robot depuis l'extérieur. Cela permet également un niveau de sécurité supplémentaire lors de la connexion à un ordinateur distant. Le mécanisme d'obtention du PeerID de la contrepartie peut être le même que dans le cas de Home Assistant - via une requête Digital Twin depuis le nœud Robonomics, à la seule différence qu'au lieu du serveur Home Assistant, il y aura un robot ROS 2, et au lieu du libP2P-websocker-proxy, il y aura un Robonomics ROS 2 Wrapper connecté au robot.

## Opportunités potentielles à l'avenir

Cependant, ce ne sont pas toutes les possibilités qu'un cloud décentralisé basé sur les technologies Web3 peut offrir. Dans l'exemple décrit ci-dessus, ces technologies sont utilisées pour la transmission relativement simple de flux de données de messages entre ordinateurs distants.

Cela peut être appelé le niveau de transport de base dans la pile réseau Robonomics, qui sert de base à la mise en œuvre de protocoles de niveau supérieur plus complexes. Allant des analogues SSH, impliquant une interaction plus interactive des utilisateurs avec leurs systèmes cyber-physiques, jusqu'aux protocoles applicatifs impliquant l'interaction d'un grand nombre d'utilisateurs d'une infrastructure robotique autonome.

Par exemple, la décision de lancer la production d'un certain produit peut être liée à un vote au sein d'une organisation de consommateurs potentiels de ce produit, en tenant compte de la faisabilité économique. Actuellement, la décision de lancer une production est prise via des mécanismes d'investissement, où les investisseurs, ayant reçu des informations sur la demande potentielle, peuvent acquérir des parts d'entreprises individuelles susceptibles de satisfaire cette demande à l'avenir.. Si les consommateurs peuvent participer plus activement au développement et à la tarification de nouveaux produits, alors à long terme, nous pourrons passer à un mode de fonctionnement où la production se restructurera automatiquement pour satisfaire la demande selon les données fournies par les consommateurs dans le réseau.