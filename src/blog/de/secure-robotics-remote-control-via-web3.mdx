---
title: "Sichere Fernsteuerung von Robotik: Die Robonomics-Lösung"
date: 2024-04-19
published: true
locale: 'de'
cover_image: /blog/images/secure-robotics-remote-control-via-web3/remote_control_cover.png
description: "Die Fernverbindung und -steuerung des eigenen Smart-Geräts ist bei Nutzern eine sehr beliebte Funktion. Dennoch bereitet eine solch triviale Aufgabe unerfahrenen Nutzern immer noch viele Schwierigkeiten – von der Überwindung von NAT bis hin zu Sicherheitsproblemen. In einem neuen Artikel zeigen wir, wie diese Schwierigkeiten mit Hilfe von Robonomics überwunden werden können."
related: ['Robonomics Helps Enable Rust for ROS 2', 'Automation: Home meets Industrial']
abstract: "Die Fernverbindung und -steuerung des eigenen Smart-Geräts ist bei Nutzern eine sehr beliebte Funktion. Dennoch bereitet eine solch triviale Aufgabe unerfahrenen Nutzern immer noch viele Schwierigkeiten – von der Überwindung von NAT bis hin zu Sicherheitsproblemen. In einem neuen Artikel zeigen wir, wie diese Schwierigkeiten mit Hilfe von Robonomics überwunden werden können."
tags: ['ROS 2', 'Smart Home']
---

Im vorherigen Artikel haben wir darüber gesprochen, wie wir die Vorteile industrieller Lösungen in der Infrastruktur eines robotisierten Smart Homes nutzen. Wir haben gezeigt, wie das ROS 2 Framework und sein Middleware-Protokoll eine automatische Geräteerkennung und eine intensive Interaktion (auch in Echtzeit) zwischen ihnen innerhalb eines lokalen Netzwerks ermöglichen, was sehr praktisch ist. Dieser Ansatz eignet sich jedoch hauptsächlich für die sogenannte Trusted Zone – jenen Teil des Computernetzwerks, in dem das Auftreten von Drittanbietern unwahrscheinlich ist. In diesem Fall vertrauen wir allen laufenden Programmen und müssen keine Verschlüsselung verwenden, genauso wie sie innerhalb eines Computers nicht verwendet wird, wenn Programme Daten miteinander austauschen.

Aber was ist, wenn Sie den Betrieb von ROS 2-Geräten mit einem externen Dienst sicherstellen oder ihnen den Fernzugriff von außen ermöglichen müssen? In solchen Momenten entsteht ein Sicherheitsproblem – wenn ein externer Dienst (und potenziell eine böswillige Person) Zugriff auf einen ROS 2-Knoten erhält, hat er im Grunde Zugriff auf alle anderen Knoten – er kann den gesamten internen DDS-Verkehr vollständig abhören und auf alle verfügbaren Systemdienste zugreifen.

Der klassische Kompromiss zwischen Sicherheit und Geschwindigkeit/Komfort wird gelöst, indem das souveräne Smart-Home-System in zwei Teile aufgeteilt wird – einen sicheren und einen unsicheren.

## ROS 2 Sicherheit

Die Ausweisung einer Zone mit besonderen Sicherheitsanforderungen im Arbeitsbereich von ROS 2-Knoten ist eine ziemlich anspruchsvolle Aufgabe. Das Standard-ROS 2 Security-Paket ([sros2](https://docs.ros.org/de/rolling/Concepts/Intermediate/About-Security.html)) ist Teil von [ros-core](https://ros.org/reps/rep-2001.html#id32), auf dem alle ROS 2-Distributionen basieren, und laut den Hauptentwicklern soll es dieses Problem lösen. Es bietet die Möglichkeit, eine relativ einfache Public Key Infrastructure (PKI) innerhalb eines einzelnen lokalen Netzwerks einzurichten. Für jeden ROS 2-Knoten werden Zugriffsrichtlinien auf die Daten anderer Knoten festgelegt sowie eine Reihe von Standarddateien für solche Szenarien – kryptografische Schlüssel und Zertifikate. Während der Programmausführung „sehen“ die Knoten nur diejenigen Datenquellen, auf die der Zugriff explizit in der Konfiguration beim Projektstart festgelegt ist. Dieser Ansatz hat jedoch einen großen Nachteil – der gesamte Datenverkehr im System wird verschlüsselt, was sich auf die Leistung unter der durch DDS erzeugten Netzwerklast auswirken kann. Es wird notwendig sein, alle Zugriffsrichtlinien auszuformulieren und Schlüssel für alle Knoten zu generieren. Das ist sehr schwierig einzurichten und zu warten. Und vor allem verlieren wir den Hauptvorteil des ROS 2 Middleware – die Performance.

## Bridges

Eine weitere Lösung besteht darin, sogenannte Gateways zu erstellen, die die benötigten Daten übertragen und alles andere privat halten. Typischerweise wird dies mit VPN- oder SSH-Tunneln erreicht. Im sicheren Datenaustauschraum wird ein separater Knoten erstellt, der eine öffentliche Adresse für externe Verbindungen hat. In diesem Fall erfolgt das Sicherheitsmanagement nur auf Ebene dieses Knotens (im Wesentlichen ein Fenster zur Außenwelt), ohne alle anderen zu beeinflussen. Dieser Ansatz wird in den Projekten [Husarnet](https://github.com/husarnet/husarnet), [DDS Router](https://github.com/eProsima/DDS-Router) und [Zenoh Bridge](https://github.com/eclipse-zenoh/zenoh-plugin-ros2dds) verwendet, hat aber auch seine Nachteile. In diesem Szenario muss ein sicherer Kommunikationskanal eingerichtet werden, der streng an die IP-Adresse oder den Domainnamen des Gegenübers gebunden ist. Diese können sich ändern, blockiert werden oder anfällig für Angriffe sein. Als SSH entwickelt wurde, wurde dies nicht berücksichtigt. Außerdem verlässt sich SSH hauptsächlich auf das Zugriffskontrollsystem des Betriebssystems, mit all seinen inhärenten Nachteilen.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/remote_control_legacy_approach.png" alt="Klassische Fernsteuerung über öffentliche IP und SSH/VPN" />

*So verbinden sich Benutzer heutzutage typischerweise aus der Ferne mit ihren Robotern. Dieser Ansatz hat jedoch einige Nachteile. Er erfordert eine öffentliche IP-Adresse und/oder einen DNS-Namen, die in manchen Ländern blockiert werden können. Außerdem müssen zusätzliche private Schlüssel an potenziell unsicheren Orten gespeichert werden (z. B. ~/.ssh).*

SSH, das hauptsächlich von Systemadministratoren und IT-Spezialisten verwendet wird, setzt grundlegende Kenntnisse der Bash-Kommandozeile und Vertrauen in das Betriebssystem voraus, da die Verschlüsselungsschlüssel direkt im Dateisystem oder im SSH-Agent gespeichert werden. Die Verwaltung von Zugangsschlüsseln bleibt für den durchschnittlichen Nutzer eine ziemlich komplexe Aufgabe, um einen sicheren Schutz der eigenen Daten zu gewährleisten.

## Web3-Lösung

Wie wir sehen, sind die oben genannten Methoden nicht ohne Nachteile, daher betrachten wir eine mögliche Lösung des Problems unter Verwendung von Peer-to-Peer-Netzwerktechnologien, auf denen Robonomics basiert. In diesem Fall kann die dezentrale Robonomics-Cloud als sichere Routing-Tabelle betrachtet werden, deren Adressen die öffentlichen Schlüssel der Knoten sind. Sie benötigen einen lokalen Robonomics-Knoten und müssen wissen, welchen öffentlichen Schlüssel Ihr Gegenüber besitzt, um nicht vom DNS-System (einschließlich Domain-Registraren und -Servern) und IP-Adresssperren abhängig zu sein. Die von Robonomics verwendete [libP2P](https://libp2p.io/)-Bibliothek kann verschiedene Transportprotokolle für die Nachrichtenübermittlung nutzen.

Mit dem Fortschritt der Web3-Technologien sind zudem effizientere Methoden zur Verwaltung kritischer Informationen, einschließlich privater Schlüssel, entstanden. Eine davon ist eine mnemonische Phrase oder ein Seed – eine Folge von 12 oder 24 Wörtern, die zur Erstellung von Konten in dezentralen Netzwerken verwendet wird. Diese Methode ist bequem und sicher, da der Seed einmalig bei der Initialisierung auf einem externen Medium (z. B. auf Papier) notiert und nur zur Wiederherstellung des Kontos verwendet wird. Aus der mnemonischen Phrase wird ein Master-Schlüssel erstellt, aus dem jede beliebige Schlüsselhierarchie für verschiedene Aufgaben generiert werden kann (siehe **[Hierarchisch deterministische Schlüssel](https://docs.substrate.io/reference/command-line-tools/subkey/#hierarchical-deterministic-keys)**). Dies vereinfacht die Verwaltung und Wiederherstellung von Schlüsseln, falls sie verloren gehen. Gelangt eine böswillige Person in den Besitz eines Ihrer Schlüsselpaaren, kann sie keine Informationen über andere aus der mnemonischen Phrase abgeleitete Schlüssel erhalten. Die Funktion der Soft-Derivation ermöglicht es, den Besitz des Root-Kontos zu bestätigen, ohne dieses offenzulegen. Da Soft-Keys mit dem öffentlichen Schlüssel des Elternteils abgeleitet werden können, lassen sie sich zur Identifikation des Elternteils verwenden. Schlüssel, ohne den übergeordneten Seed offenzulegen.

## Fernsteuerung in Home Assistant

Schauen wir uns den Verbindungsprozess genauer an. Die dezentrale [Robonomics-Anwendung](https://robonomics.app/) (oder einfach DApp) läuft direkt in Ihrem Browser, es ist keine zusätzliche Softwareinstallation erforderlich und Sie müssen keine Schlüssel im Dateisystem in einer Umgebung mit vielen Programmen speichern, deren Sicherheit nicht garantiert werden kann. Die Verwaltung der Zugangsschlüssel erfolgt über die Polkadot JS-Erweiterung sowie mit Hilfe eines externen Hardware-Schlüsselspeichers (zum Beispiel [Polkadot Vault](https://wiki.polkadot.network/docs/polkadot-vault)) für zusätzliche Zuverlässigkeit. Neben spezieller Software zur Interaktion mit Robonomics enthält die DApp auch einen leichtgewichtigen libP2P-Knoten, über den die Verbindung zu Home Assistant hergestellt wird.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_home_assistant_usecase.png" alt="Home Assistant Fernsteuerung" />

Der Inhaber eines Robonomics Web Service-Abonnements verwaltet die Zugriffsrechte auf die Smart-Home-Infrastruktur über einen sogenannten Controller – ein Konto, das alle sensiblen Informationen in verschlüsselter Form in einem digitalen Zwilling verwaltet. Nur Nutzer, die zum Abonnement hinzugefügt wurden, können diese Daten entschlüsseln. Neben Zugangsschlüsseln speichert der Digitale Zwilling auch die DApp-Konfiguration und die sogenannte libP2P-Multi-Adresse, zu der die DApp für eine sichere Verbindung verbindet. Die Multi-Adresse ist eine der Innovationen, die den libP2P-Ansatz so einzigartig und flexibel machen. Es handelt sich um ein spezielles Adressformat für Knoten, das das Vorhandensein vieler IP-Adressen, Transport- und Netzwerk-Identifikatoren, Protokolle und Ports vorsieht, über die Sie einen bestimmten Knoten erreichen können. Die vollständige Liste der unterstützten Protokolle ist in der [Spezifikation](https://github.com/multiformats/multiaddr/blob/master/protocols.csv) aufgeführt.

Der zum Abonnement hinzugefügte Nutzer extrahiert also eine Multi-Adresse aus dem Robonomics-Digitalzwilling und stellt eine sichere Verbindung mit einer Peer-ID her, die nur ihm bekannt ist. Erfolg!

## Fernsteuerung in ROS 2

In ähnlicher Weise können Sie die bestehenden Funktionen von Robonomics nutzen, um mit Robotern zu interagieren. Das Robossembler-Team hat im Rahmen des Robonomics Grant Program ein Proof-of-Concept-Projekt namens [Robonomics Bridge](https://gitlab.com/robossembler/robonomics_bridge) entwickelt. Diese Bridge ermöglichtdein ROS 2-Knoten, um sich mit jedem externen Dienst, entfernten Arbeitsplatz oder einem anderen ROS 2-System zu verbinden.

<RbImage zoom src="/blog/images/secure-robotics-remote-control-via-web3/robonomics_ros2_usecase.png" alt="ROS 2 Fernsteuerung mit Robonomics" />

*Eine Illustration, wie die Fernsteuerung eines Heimroboters im Fall von ROS 2 aussehen könnte. Dieser Ansatz bietet eine Reihe bedeutender Vorteile: Es wird keine öffentliche IP benötigt, der Zugriff auf den Roboter ist selbst durch Netzwerk-Firewalls (NAT) möglich, private kryptografische Schlüssel werden nicht auf der Festplatte gespeichert und sind zuverlässig geschützt.*

Das in ROS 2 verwendete Protokoll DDS lässt sich aufgrund seines ähnlichen Publisher-Subscriber-Modells für die Knoteninteraktion natürlich mit libP2P kombinieren. Mit Hilfe der Robonomics-Bridge können ROS 2-Knoten und deren Schnittstellen – Topics, Services, Nachrichtentypen (zum Beispiel unter Verwendung des eProsima Integration Service) – deklarativ konfiguriert werden, wodurch eine Interaktion mit dem Roboter von außen möglich ist. Dies ermöglicht auch ein zusätzliches Maß an Sicherheit beim Verbinden mit einem entfernten Computer. Der Mechanismus zum Erhalt der PeerID des Gegenübers kann derselbe sein wie im Fall mit Home Assistant – durch eine Digital Twin-Anfrage vom Robonomics-Knoten, mit dem einzigen Unterschied, dass anstelle des Home Assistant Servers ein ROS 2-Roboter und anstelle des libP2P-websocker-proxy ein Robonomics ROS 2 Wrapper mit dem Roboter verbunden ist.

## Potenzielle Möglichkeiten in der Zukunft

Dies sind jedoch nicht alle Möglichkeiten, die eine dezentrale Cloud auf Basis von Web3-Technologien bieten kann. Im oben beschriebenen Beispiel werden diese Technologien für die relativ einfache Übertragung von Nachrichten-Datenströmen zwischen entfernten Computern verwendet.

Dies kann als die grundlegende Transportschicht im Robonomics-Netzwerk-Stack bezeichnet werden, die die Grundlage für die Implementierung komplexerer, höherstufiger Protokolle bildet. Angefangen bei SSH-Analoga, die eine interaktivere Interaktion der Nutzer mit ihren cyber-physischen Systemen ermöglichen, bis hin zu Anwendungsprotokollen, die die Interaktion einer großen Anzahl von Nutzern autonomer robotischer Infrastrukturen implizieren.

Beispielsweise kann die Entscheidung, mit der Produktion eines bestimmten Produkts zu beginnen, an eine Abstimmung innerhalb einer Organisation potenzieller Konsumenten dieses Produkts geknüpft werden, wobei die wirtschaftliche Zweckmäßigkeit berücksichtigt wird. Derzeit wird die Entscheidung, eine Produktion zu starten, durch Investitionsmechanismen getroffen, bei denen Investoren, nachdem sie Informationen über die potenzielle Nachfrage erhalten haben, Anteile einzelner Unternehmen erwerben können, die diese Nachfrage in Zukunft befriedigen können.. Wenn Verbraucher aktiver an der Entwicklung und Preisgestaltung neuer Produkte teilnehmen können, dann können wir langfristig zu einer Betriebsweise übergehen, bei der sich die Produktion automatisch umstrukturiert, um die Nachfrage entsprechend den von den Verbrauchern ins Netzwerk eingespeisten Daten zu befriedigen.